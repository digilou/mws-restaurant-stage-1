"use strict";var _createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var DBHelper=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"pingServer",value:function(e){return console.log("pingServer server: "+e),fetch(e).then(function(e){if(e.ok)return!0}).catch(function(e){return console.log("Error while pinging server: ",e),!1})}},{key:"fetchRestaurants",value:function(r){var e=this;fetch(""+this.RESTAURANTS_URL).then(function(e){return e.json()}).then(function(n){e.openDb.then(function(e){var t=e.transaction("restaurants","readwrite").objectStore("restaurants");return n.forEach(function(e){return t.put(e)}),r(null,n),t.complete})}).catch(function(e){console.log("Request failed: "+e),r(e,null)})}},{key:"fetchRestaurantById",value:function(r,o){this.fetchRestaurants(function(e,t){if(e)o(e,null);else{var n=t.find(function(e){return e.id==r});n?o(null,n):o("Restaurant does not exist",null)}})}},{key:"fetchRestaurantByCuisine",value:function(r,o){this.fetchRestaurants(function(e,t){if(e)o(e,null);else{var n=t.filter(function(e){return e.cuisine_type==r});o(null,n)}})}},{key:"fetchRestaurantByNeighborhood",value:function(r,o){this.fetchRestaurants(function(e,t){if(e)o(e,null);else{var n=t.filter(function(e){return e.neighborhood==r});o(null,n)}})}},{key:"fetchRestaurantByCuisineAndNeighborhood",value:function(r,o,i){this.fetchRestaurants(function(e,t){if(e)i(e,null);else{var n=t;"all"!=r&&(n=n.filter(function(e){return e.cuisine_type==r})),"all"!=o&&(n=n.filter(function(e){return e.neighborhood==o})),i(null,n)}})}},{key:"fetchNeighborhoods",value:function(o){this.fetchRestaurants(function(e,n){if(e)o(e,null);else{var r=n.map(function(e,t){return n[t].neighborhood}),t=r.filter(function(e,t){return r.indexOf(e)==t});o(null,t)}})}},{key:"fetchCuisines",value:function(o){this.fetchRestaurants(function(e,n){if(e)o(e,null);else{var r=n.map(function(e,t){return n[t].cuisine_type}),t=r.filter(function(e,t){return r.indexOf(e)==t});o(null,t)}})}},{key:"urlForRestaurant",value:function(e){return"./restaurant.html?id="+e.id}},{key:"imageUrlForRestaurant",value:function(e){return"/img/"+e.id+".jpg"}},{key:"mapMarkerForRestaurant",value:function(e,t){return new google.maps.Marker({position:e.latlng,title:e.name,url:this.urlForRestaurant(e),map:t,animation:google.maps.Animation.DROP})}},{key:"fetchReviewsByRestaurantId",value:function(){this.pingServer(this.REVIEWS_URL)?(console.log("Server online."),this.fetchReviewsFromServer(),console.log("Fetched from server.")):(console.log("Server offline."),this.fetchReviewsFromDB(fillReviewsHTML),console.log("Fetched from cached data."))}},{key:"fetchReviewsFromServer",value:function(){var e=this;fetch(t.REVIEWS_URL+"/?restaurant_id="+Number(getParameterByName("id"))).then(function(e){if(e.ok)return e.json()}).then(function(n){e.openDb.then(function(e){var t=e.transaction("reviews","readwrite").objectStore("reviews");return n.forEach(function(e){return t.put(e)}),t.complete}).then(fillReviewsHTML(n))})}},{key:"fetchReviewsFromDB",value:function(r){this.openDb.then(function(e){var t=e.transaction("reviews","readonly").objectStore("reviews"),n=e.transaction("reviewQueue","readonly").objectStore("reviewQueue");Promise.all(t.getAll()+n.getAll());return r&&0<r.length&&reviewsStore.getAll().then(function(e){fillReviewsHTML(e)}),t.complete})}},{key:"addReviewToQueue",value:function(n){this.openDb.then(function(e){var t=e.transaction("reviewQueue","readwrite").objectStore("reviewQueue");return Array.isArray(n)?n.forEach(function(e){t.put(e),console.log("more reviews stored")}):(t.put(n),console.log("one review stored")),t.complete}).then(fillReviewsHTML(n)).then(console.log("You're offline. Reviews queued!"))}},{key:"postFromReviewQueue",value:function(){var n=this;this.openDb.then(function(e){var t=e.transaction("reviewQueue","readwrite").objectStore("reviewQueue");t.getAll().then(function(e){Array.isArray(e)?e.forEach(function(e){n.postToServer(e)}):n.postToServer(offlineReview)}).then(function(e){t.clear(e)})})}},{key:"storeInIDB",value:function(){var e=this;fetch(this.REVIEWS_URL+"/?restaurant_id="+getParameterByName("id")).then(function(e){return e.json()}).then(function(n){e.openDb.then(function(e){var t=e.transaction("reviews","readwrite").objectStore("reviews");return n.forEach(function(e){return t.put(e)}),t.complete})}).then(function(){return console.log("Reviews updated in IDB!")}).catch(function(e){return console.log(e)})}},{key:"postToServer",value:function(e){return fetch(this.REVIEWS_URL,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(e),credentials:"same-origin"}).then(function(e){if(e.ok)return e.json()}).then(this.storeInIDB(e)).then(location.reload(!0)).catch(function(e){return e})}},{key:"changeToggleStateOnServer",value:function(e){fetch(this.RESTAURANTS_URL+"/"+getParameterByName("id")+"/?is_favorite="+e,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(e),credentials:"same-origin",mode:"no-cors"}).then(function(e){if(e.ok)return e.json()}).catch(function(e){return e})}},{key:"DATABASE_URL",get:function(){return"http://localhost:1337"}},{key:"RESTAURANTS_URL",get:function(){return this.DATABASE_URL+"/restaurants"}},{key:"REVIEWS_URL",get:function(){return this.DATABASE_URL+"/reviews"}},{key:"openDb",get:function(){return idb.open("rr-db",3,function(e){switch(e.oldVersion){case 0:var t=e.createObjectStore("restaurants",{keyPath:"id"});t.createIndex("cuisine","cuisine_type"),t.createIndex("neighborhood","neighborhood");case 1:e.createObjectStore("reviews",{keyPath:"id"}).createIndex("restaurant","restaurant_id");case 2:e.createObjectStore("reviewQueue",{autoIncrement:!0})}})}}]),t}();!function(){function a(n){return new Promise(function(e,t){n.onsuccess=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function i(n,r,o){var i=void 0,e=new Promise(function(e,t){a(i=n[r].apply(n,o)).then(e,t)});return e.request=i,e}function e(e,n,t){t.forEach(function(t){Object.defineProperty(e.prototype,t,{get:function(){return this[n][t]},set:function(e){this[n][t]=e}})})}function t(t,n,r,e){e.forEach(function(e){e in r.prototype&&(t.prototype[e]=function(){return i(this[n],e,arguments)})})}function n(t,n,r,e){e.forEach(function(e){e in r.prototype&&(t.prototype[e]=function(){return this[n][e].apply(this[n],arguments)})})}function r(e,r,t,n){n.forEach(function(n){n in t.prototype&&(e.prototype[n]=function(){return e=this[r],(t=i(e,n,arguments)).then(function(e){if(e)return new u(e,t.request)});var e,t})})}function o(e){this._index=e}function u(e,t){this._cursor=e,this._request=t}function s(e){this._store=e}function c(n){this._tx=n,this.complete=new Promise(function(e,t){n.oncomplete=function(){e()},n.onerror=function(){t(n.error)},n.onabort=function(){t(n.error)}})}function l(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new c(n)}function f(e){this._db=e}e(o,"_index",["name","keyPath","multiEntry","unique"]),t(o,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),r(o,"_index",IDBIndex,["openCursor","openKeyCursor"]),e(u,"_cursor",["direction","key","primaryKey","value"]),t(u,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(u.prototype[n]=function(){var t=this,e=arguments;return Promise.resolve().then(function(){return t._cursor[n].apply(t._cursor,e),a(t._request).then(function(e){if(e)return new u(e,t._request)})})})}),s.prototype.createIndex=function(){return new o(this._store.createIndex.apply(this._store,arguments))},s.prototype.index=function(){return new o(this._store.index.apply(this._store,arguments))},e(s,"_store",["name","keyPath","indexNames","autoIncrement"]),t(s,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),r(s,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),n(s,"_store",IDBObjectStore,["deleteIndex"]),c.prototype.objectStore=function(){return new s(this._tx.objectStore.apply(this._tx,arguments))},e(c,"_tx",["objectStoreNames","mode"]),n(c,"_tx",IDBTransaction,["abort"]),l.prototype.createObjectStore=function(){return new s(this._db.createObjectStore.apply(this._db,arguments))},e(l,"_db",["name","version","objectStoreNames"]),n(l,"_db",IDBDatabase,["deleteObjectStore","close"]),f.prototype.transaction=function(){return new c(this._db.transaction.apply(this._db,arguments))},e(f,"_db",["name","version","objectStoreNames"]),n(f,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[s,o].forEach(function(e){i in e.prototype&&(e.prototype[i.replace("open","iterate")]=function(){var e,t=(e=arguments,Array.prototype.slice.call(e)),n=t[t.length-1],r=this._store||this._index,o=r[i].apply(r,t.slice(0,-1));o.onsuccess=function(){n(o.result)}})})}),[o,s].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,n){var r=this,o=[];return new Promise(function(t){r.iterateCursor(e,function(e){e?(o.push(e.value),void 0===n||o.length!=n?e.continue():t(o)):t(o)})})})});var d={open:function(e,t,n){var r=i(indexedDB,"open",[e,t]),o=r.request;return o&&(o.onupgradeneeded=function(e){n&&n(new l(o.result,e.oldVersion,o.transaction))}),r.then(function(e){return new f(e)})},delete:function(e){return i(indexedDB,"deleteDatabase",[e])}};"undefined"!=typeof module?(module.exports=d,module.exports.default=module.exports):self.idb=d}();var restaurants=void 0,neighborhoods=void 0,cuisines=void 0,map=void 0,markers=[];document.addEventListener("DOMContentLoaded",function(e){fetchNeighborhoods(),fetchCuisines(),DBHelper.pingServer(DBHelper.REVIEWS_URL)?DBHelper.postFromReviewQueue():console.log("Offline")}),fetchNeighborhoods=function(){DBHelper.fetchNeighborhoods(function(e,t){e?console.error(e):(self.neighborhoods=t,fillNeighborhoodsHTML())})},fillNeighborhoodsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.neighborhoods,n=document.getElementById("neighborhoods-select");e.forEach(function(e){var t=document.createElement("option");t.innerHTML=e,t.value=e,n.append(t)})},fetchCuisines=function(){DBHelper.fetchCuisines(function(e,t){e?console.error(e):(self.cuisines=t,fillCuisinesHTML())})},fillCuisinesHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.cuisines,n=document.getElementById("cuisines-select");e.forEach(function(e){var t=document.createElement("option");t.innerHTML=e,t.value=e,n.append(t)})},window.initMap=function(){self.map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),updateRestaurants()},updateRestaurants=function(){var e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),n=e.selectedIndex,r=t.selectedIndex,o=e[n].value,i=t[r].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(o,i,function(e,t){e?console.error(e):(resetRestaurants(t),fillRestaurantsHTML())})},resetRestaurants=function(e){self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers&&self.markers.forEach(function(e){return null}),self.markers=[],self.restaurants=e},fillRestaurantsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants,t=document.getElementById("restaurants-list");e.forEach(function(e){t.append(createRestaurantHTML(e))}),addMarkersToMap()},createRestaurantHTML=function(e){var t=document.createElement("li"),n=document.createElement("img");n.className="restaurant-img",n.src=DBHelper.imageUrlForRestaurant(e),n.setAttribute("alt",e.name),t.append(n);var r=document.createElement("h2");r.innerHTML=e.name,t.append(r);var o=document.createElement("p");o.innerHTML=e.neighborhood,t.append(o);var i=document.createElement("p");i.innerHTML=e.address,t.append(i);var a=document.createElement("a");return a.innerHTML="View Details &raquo;",a.href=DBHelper.urlForRestaurant(e),t.append(a),t},addMarkersToMap=function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants).forEach(function(e){var t=DBHelper.mapMarkerForRestaurant(e,self.map);google.maps.event.addListener(t,"click",function(){window.location.href=t.url}),self.markers.push(t)})},"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(function(e){console.log("Successful: "+e.scope)}).catch(function(e){console.log("Error: "+e)});var restaurant=void 0,reviewForm=(map=void 0,document.forms[0]),heart=document.getElementById("svg-heart");function addReview(e){e.preventDefault();var t=reviewForm.name.value,n=document.querySelector("#review-radios input[type=radio]:checked").value,r=reviewForm.comments.value,o={restaurant_id:Number(getParameterByName("id")),name:t,rating:Number(n),comments:r,createdAt:Number(new Date),updatedAt:Number(new Date)};DBHelper.addReviewToQueue(o),reviewForm.reset()}function toggleFavorite(){var e=document.getElementById("heart-toggle");e.checked?heart.style.fill="red":heart.style.fill="#eee",e.checked?DBHelper.changeToggleStateOnServer(!0):DBHelper.changeToggleStateOnServer(!1)}function checkFave(){fetch(""+DBHelper.RESTAURANTS_URL).then(function(){"true"==self.restaurant.is_favorite?heart.style.fill="red":heart.style.fill="#eee"})}document.addEventListener("DOMContentLoaded",function(){DBHelper.pingServer(DBHelper.REVIEWS_URL)?DBHelper.postFromReviewQueue():console.log("Offline")},!1),window.initMap=function(){fetchRestaurantFromURL(function(e,t){e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1}),fillBreadcrumb(self.restaurant),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})},fetchRestaurantFromURL=function(n){if(self.restaurant)n(null,self.restaurant);else{var e=getParameterByName("id");e?(DBHelper.fetchRestaurantById(e,function(e,t){(self.restaurant=t)?(fillRestaurantHTML(),n(null,t)):console.error(e)}),DBHelper.fetchReviewsByRestaurantId(e,function(e,t){t?(console.log("Fetched reviews: ",t.length),fillReviewsHTML(t),n(null,t)):console.error(e)})):(error="No restaurant id in URL",n(error,null))}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;var t=document.getElementById("restaurant-img");t.className="restaurant-img",t.src=DBHelper.imageUrlForRestaurant(e),t.setAttribute("alt",e.name),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML()},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var n in e){var r=document.createElement("tr"),o=document.createElement("td");o.innerHTML=n,r.appendChild(o);var i=document.createElement("td");i.innerHTML=e[n],r.appendChild(i),t.appendChild(r)}},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,t=document.getElementById("reviews-container"),n=document.createElement("h3");if(n.innerHTML="Reviews",t.appendChild(n),!e){var r=document.createElement("p");return r.innerHTML="No reviews yet. Be the first!",void t.appendChild(r)}var o=document.getElementById("reviews-list");Array.isArray(e)?e.forEach(function(e){o.appendChild(createReviewHTML(e))}):o.appendChild(createReviewHTML(e)),t.appendChild(o)},createReviewHTML=function(e){var t=document.createElement("li"),n=document.createElement("p");n.innerHTML=e.name,t.appendChild(n);var r=document.createElement("p"),o=new Date(e.createdAt);r.innerHTML=o.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour12:!1}),t.appendChild(r);var i=document.createElement("p");i.innerHTML="Rating: "+e.rating+" stars",t.appendChild(i);var a=document.createElement("p");return a.innerHTML=e.comments,t.appendChild(a),t},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),n=document.createElement("li");n.setAttribute("aria-current","page"),n.innerHTML=e.name,t.appendChild(n)},getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},reviewForm.addEventListener("submit",addReview,!1),heart.addEventListener("click",toggleFavorite),addEventListener("load",checkFave,!1);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiaGVscGVyLmpzIiwiaWRiLmpzIiwibWFpbi5qcyIsInJlZ2lzdGVyLmpzIiwicmVzdGF1cmFudF9pbmZvLmpzIl0sIm5hbWVzIjpbIkRCSGVscGVyIiwic2VydmVyIiwiY29uc29sZSIsImxvZyIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwib2siLCJjYXRjaCIsImVycm9yIiwiY2FsbGJhY2siLCJfdGhpcyIsInRoaXMiLCJSRVNUQVVSQU5UU19VUkwiLCJqc29uIiwicmVzdGF1cmFudHMiLCJvcGVuRGIiLCJkYiIsInJlc3RhdXJhbnRTdG9yZSIsInRyYW5zYWN0aW9uIiwib2JqZWN0U3RvcmUiLCJmb3JFYWNoIiwicmVzdGF1cmFudCIsInB1dCIsImNvbXBsZXRlIiwiaWQiLCJmZXRjaFJlc3RhdXJhbnRzIiwiZmluZCIsInIiLCJjdWlzaW5lIiwicmVzdWx0cyIsImZpbHRlciIsImN1aXNpbmVfdHlwZSIsIm5laWdoYm9yaG9vZCIsIm5laWdoYm9yaG9vZHMiLCJtYXAiLCJ2IiwiaSIsInVuaXF1ZU5laWdoYm9yaG9vZHMiLCJpbmRleE9mIiwiY3Vpc2luZXMiLCJ1bmlxdWVDdWlzaW5lcyIsImdvb2dsZSIsIm1hcHMiLCJNYXJrZXIiLCJwb3NpdGlvbiIsImxhdGxuZyIsInRpdGxlIiwibmFtZSIsInVybCIsInVybEZvclJlc3RhdXJhbnQiLCJhbmltYXRpb24iLCJBbmltYXRpb24iLCJEUk9QIiwicGluZ1NlcnZlciIsIlJFVklFV1NfVVJMIiwiZmV0Y2hSZXZpZXdzRnJvbVNlcnZlciIsImZldGNoUmV2aWV3c0Zyb21EQiIsImZpbGxSZXZpZXdzSFRNTCIsIl90aGlzMiIsIk51bWJlciIsImdldFBhcmFtZXRlckJ5TmFtZSIsInJldmlld3MiLCJyZXZpZXdzU3RvcmUiLCJyZXZpZXciLCJyZXZpZXdTdG9yZSIsInF1ZXVlU3RvcmUiLCJQcm9taXNlIiwiYWxsIiwiZ2V0QWxsIiwibGVuZ3RoIiwiQXJyYXkiLCJpc0FycmF5IiwiX3RoaXMzIiwib2ZmbGluZVJldmlld3MiLCJvZmZsaW5lUmV2aWV3IiwicG9zdFRvU2VydmVyIiwicHVzaGVkUmV2aWV3cyIsImNsZWFyIiwiX3RoaXM0IiwiZXJyIiwiZGF0YSIsIm1ldGhvZCIsImhlYWRlcnMiLCJDb250ZW50LVR5cGUiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNyZWRlbnRpYWxzIiwic3RvcmVJbklEQiIsImxvY2F0aW9uIiwicmVsb2FkIiwidG9nZ2xlIiwibW9kZSIsIkRBVEFCQVNFX1VSTCIsImlkYiIsIm9wZW4iLCJ1cGdyYWRlREIiLCJvbGRWZXJzaW9uIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJrZXlQYXRoIiwiY3JlYXRlSW5kZXgiLCJhdXRvSW5jcmVtZW50IiwicHJvbWlzaWZ5UmVxdWVzdCIsInJlcXVlc3QiLCJyZXNvbHZlIiwicmVqZWN0Iiwib25zdWNjZXNzIiwicmVzdWx0Iiwib25lcnJvciIsInByb21pc2lmeVJlcXVlc3RDYWxsIiwib2JqIiwiYXJncyIsInAiLCJhcHBseSIsInByb3h5UHJvcGVydGllcyIsIlByb3h5Q2xhc3MiLCJ0YXJnZXRQcm9wIiwicHJvcGVydGllcyIsInByb3AiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInByb3RvdHlwZSIsImdldCIsInNldCIsInZhbCIsInByb3h5UmVxdWVzdE1ldGhvZHMiLCJDb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsInByb3h5TWV0aG9kcyIsInByb3h5Q3Vyc29yUmVxdWVzdE1ldGhvZHMiLCJ2YWx1ZSIsIkN1cnNvciIsIkluZGV4IiwiaW5kZXgiLCJfaW5kZXgiLCJjdXJzb3IiLCJfY3Vyc29yIiwiX3JlcXVlc3QiLCJPYmplY3RTdG9yZSIsInN0b3JlIiwiX3N0b3JlIiwiVHJhbnNhY3Rpb24iLCJpZGJUcmFuc2FjdGlvbiIsIl90eCIsIm9uY29tcGxldGUiLCJvbmFib3J0IiwiVXBncmFkZURCIiwiX2RiIiwiREIiLCJJREJJbmRleCIsIklEQkN1cnNvciIsIm1ldGhvZE5hbWUiLCJJREJPYmplY3RTdG9yZSIsIklEQlRyYW5zYWN0aW9uIiwiSURCRGF0YWJhc2UiLCJmdW5jTmFtZSIsInJlcGxhY2UiLCJhcnIiLCJzbGljZSIsImNhbGwiLCJuYXRpdmVPYmplY3QiLCJxdWVyeSIsImNvdW50IiwiaW5zdGFuY2UiLCJpdGVtcyIsIml0ZXJhdGVDdXJzb3IiLCJwdXNoIiwidW5kZWZpbmVkIiwiY29udGludWUiLCJleHAiLCJ2ZXJzaW9uIiwidXBncmFkZUNhbGxiYWNrIiwiaW5kZXhlZERCIiwib251cGdyYWRlbmVlZGVkIiwiZXZlbnQiLCJkZWxldGUiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmYXVsdCIsInNlbGYiLCJtYXJrZXJzIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZmV0Y2hOZWlnaGJvcmhvb2RzIiwiZmV0Y2hDdWlzaW5lcyIsInBvc3RGcm9tUmV2aWV3UXVldWUiLCJmaWxsTmVpZ2hib3Job29kc0hUTUwiLCJzZWxlY3QiLCJnZXRFbGVtZW50QnlJZCIsIm9wdGlvbiIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJhcHBlbmQiLCJmaWxsQ3Vpc2luZXNIVE1MIiwid2luZG93IiwiaW5pdE1hcCIsIk1hcCIsInpvb20iLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJzY3JvbGx3aGVlbCIsInVwZGF0ZVJlc3RhdXJhbnRzIiwiY1NlbGVjdCIsIm5TZWxlY3QiLCJjSW5kZXgiLCJzZWxlY3RlZEluZGV4IiwibkluZGV4IiwiZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kIiwicmVzZXRSZXN0YXVyYW50cyIsImZpbGxSZXN0YXVyYW50c0hUTUwiLCJtYXJrZXIiLCJ1bCIsImNyZWF0ZVJlc3RhdXJhbnRIVE1MIiwiYWRkTWFya2Vyc1RvTWFwIiwibGkiLCJpbWFnZSIsImNsYXNzTmFtZSIsInNyYyIsImltYWdlVXJsRm9yUmVzdGF1cmFudCIsInNldEF0dHJpYnV0ZSIsImFkZHJlc3MiLCJtb3JlIiwiaHJlZiIsIm1hcE1hcmtlckZvclJlc3RhdXJhbnQiLCJhZGRMaXN0ZW5lciIsIm5hdmlnYXRvciIsInNlcnZpY2VXb3JrZXIiLCJyZWdpc3RlciIsInNjb3BlIiwicmVnIiwicmV2aWV3Rm9ybSIsImZvcm1zIiwiaGVhcnQiLCJhZGRSZXZpZXciLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJOYW1lIiwidXNlclJhdGluZyIsInF1ZXJ5U2VsZWN0b3IiLCJ1c2VyQ29tbWVudCIsImNvbW1lbnRzIiwicmV2aWV3RGF0YSIsInJlc3RhdXJhbnRfaWQiLCJyYXRpbmciLCJjcmVhdGVkQXQiLCJEYXRlIiwidXBkYXRlZEF0IiwiYWRkUmV2aWV3VG9RdWV1ZSIsInJlc2V0IiwidG9nZ2xlRmF2b3JpdGUiLCJjaGVja2JveCIsImNoZWNrZWQiLCJzdHlsZSIsImZpbGwiLCJjaGFuZ2VUb2dnbGVTdGF0ZU9uU2VydmVyIiwiY2hlY2tGYXZlIiwiaXNfZmF2b3JpdGUiLCJmZXRjaFJlc3RhdXJhbnRGcm9tVVJMIiwiZmlsbEJyZWFkY3J1bWIiLCJmZXRjaFJlc3RhdXJhbnRCeUlkIiwiZmlsbFJlc3RhdXJhbnRIVE1MIiwiZmV0Y2hSZXZpZXdzQnlSZXN0YXVyYW50SWQiLCJvcGVyYXRpbmdfaG91cnMiLCJmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCIsIm9wZXJhdGluZ0hvdXJzIiwiaG91cnMiLCJrZXkiLCJyb3ciLCJkYXkiLCJhcHBlbmRDaGlsZCIsInRpbWUiLCJjb250YWluZXIiLCJub1Jldmlld3MiLCJjcmVhdGVSZXZpZXdIVE1MIiwiZGF0ZSIsImNyZWF0ZWQiLCJ0b0xvY2FsZVN0cmluZyIsInllYXIiLCJtb250aCIsImhvdXIxMiIsImJyZWFkY3J1bWIiLCJSZWdFeHAiLCJleGVjIiwiZGVjb2RlVVJJQ29tcG9uZW50Il0sIm1hcHBpbmdzIjoiaVlBR01BLHNIQThCY0MsR0FRaEIsT0FQQUMsUUFBUUMsSUFBUixzQkFBa0NGLEdBQ25CRyxNQUFNSCxHQUFRSSxLQUFLLFNBQUFDLEdBQ2hDLEdBQUlBLEVBQVNDLEdBQU0sT0FBTyxJQUN6QkMsTUFB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aUIsT0FBUXlFLFdBQVciLCJmaWxlIjoiYWxsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENvbW1vbiBkYXRhYmFzZSBoZWxwZXIgZnVuY3Rpb25zLlxyXG4gKi9cclxuY2xhc3MgREJIZWxwZXIge1xyXG5cclxuICAvKipcclxuICAgKiBEYXRhYmFzZSBVUkwuXHJcbiAgKiovXHJcbiAgc3RhdGljIGdldCBEQVRBQkFTRV9VUkwoKSB7XHJcbiAgICBjb25zdCBwb3J0ID0gMTMzNzsgLy8gQ2hhbmdlIHRoaXMgdG8geW91ciBzZXJ2ZXIgcG9ydFxyXG4gICAgcmV0dXJuIGBodHRwOi8vbG9jYWxob3N0OiR7cG9ydH1gO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGF0YWJhc2UgVVJMIGZvciByZXN0YXVyYW50cy5cclxuICAgKi9cclxuICBzdGF0aWMgZ2V0IFJFU1RBVVJBTlRTX1VSTCgpIHtcclxuICAgIHJldHVybiBgJHt0aGlzLkRBVEFCQVNFX1VSTH0vcmVzdGF1cmFudHNgO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGF0YWJhc2UgVVJMIGZvciByZXZpZXdzLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXQgUkVWSUVXU19VUkwoKSB7XHJcbiAgICByZXR1cm4gYCR7dGhpcy5EQVRBQkFTRV9VUkx9L3Jldmlld3NgO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQXN5bmMgZnVuY3Rpb24gdGhhdCBwaW5ncyBhcHByb3ByaWF0ZSBzZXJ2ZXIgdG8gc2VlIGlmIG9ubGluZS5cclxuICAgKiBUYWtlcyBlaXRoZXIgUkVTVEFVUkFOVFNfVVJMIE9SIFJFVklFV1NfVVJMIGFzIGFyZ3VtZW50XHJcbiAgICogQWRhcHRlZCBmcm9tIGNvZGUgYnkgTGF1cmEgRnJhbmtsaW4sXHJcbiAgICogcGVyIE5pY29sZSBGcmVlZCdzIGlkZWEgdG8gcGluZyB0aGUgc2VydmVyLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBwaW5nU2VydmVyKHNlcnZlcikge1xyXG4gICAgY29uc29sZS5sb2coYHBpbmdTZXJ2ZXIgc2VydmVyOiAke3NlcnZlcn1gKTtcclxuICAgIGNvbnN0IHN0YXR1cyA9IGZldGNoKHNlcnZlcikudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgIGlmIChyZXNwb25zZS5vaykgeyByZXR1cm4gdHJ1ZTsgfVxyXG4gICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnRXJyb3Igd2hpbGUgcGluZ2luZyBzZXJ2ZXI6ICcsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gc3RhdHVzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogb3BlbiBjYWNoZVxyXG4gICoqL1xyXG4gIHN0YXRpYyBnZXQgb3BlbkRiKCkge1xyXG4gICAgY29uc3QgZGJQcm9taXNlID0gaWRiLm9wZW4oJ3JyLWRiJywgMywgKHVwZ3JhZGVEQikgPT4ge1xyXG4gICAgICAvLyBjcmVhdGUgb2JqZWN0IHN0b3JlXHJcbiAgICAgIHN3aXRjaCAodXBncmFkZURCLm9sZFZlcnNpb24pIHtcclxuICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAvLyBzdG9yZSByZXN0YXVyYW50IGluZm9cclxuICAgICAgICAgIGNvbnN0IHJlc3RhdXJhbnRTdG9yZSA9IHVwZ3JhZGVEQi5jcmVhdGVPYmplY3RTdG9yZSgncmVzdGF1cmFudHMnLCB7XHJcbiAgICAgICAgICAgIGtleVBhdGg6ICdpZCdcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgcmVzdGF1cmFudFN0b3JlLmNyZWF0ZUluZGV4KCdjdWlzaW5lJywgJ2N1aXNpbmVfdHlwZScpO1xyXG4gICAgICAgICAgcmVzdGF1cmFudFN0b3JlLmNyZWF0ZUluZGV4KCduZWlnaGJvcmhvb2QnLCAnbmVpZ2hib3Job29kJyk7XHJcbiAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgLy8gc3RvcmUgcmV2aWV3IGluZm9cclxuICAgICAgICAgIGNvbnN0IHJldmlld1N0b3JlID0gdXBncmFkZURCLmNyZWF0ZU9iamVjdFN0b3JlKCdyZXZpZXdzJywge1xyXG4gICAgICAgICAgICBrZXlQYXRoOiAnaWQnXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIC8vIGNyZWF0ZSBpbmRleCBieSByZXN0YXVyYW50IGFuZCBkYXRlIHBvc3RlZFxyXG4gICAgICAgICAgcmV2aWV3U3RvcmUuY3JlYXRlSW5kZXgoJ3Jlc3RhdXJhbnQnLCAncmVzdGF1cmFudF9pZCcpO1xyXG4gICAgICAgICAgLy8gcmV2aWV3U3RvcmUuY3JlYXRlSW5kZXgoJ2J5LWRhdGUnLCAnZGF0ZScpO1xyXG4gICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgIC8vIGNyZWF0ZSBzdG9yZSBmb3IgcmV2aWV3cyBjcmVhdGVkIG9mZmxpbmVcclxuICAgICAgICAgIHVwZ3JhZGVEQi5jcmVhdGVPYmplY3RTdG9yZSgncmV2aWV3UXVldWUnLCB7XHJcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWVcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBkYlByb21pc2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCBhbmQgY2FjaGUgYWxsIHJlc3RhdXJhbnRzLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRzKGNhbGxiYWNrKSB7XHJcbiAgICBmZXRjaChgJHt0aGlzLlJFU1RBVVJBTlRTX1VSTH1gKVxyXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgLnRoZW4ocmVzdGF1cmFudHMgPT4ge1xyXG4gICAgICB0aGlzLm9wZW5EYi50aGVuKCBkYiA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVzdGF1cmFudFN0b3JlID0gZGIudHJhbnNhY3Rpb24oJ3Jlc3RhdXJhbnRzJywgJ3JlYWR3cml0ZScpLm9iamVjdFN0b3JlKCdyZXN0YXVyYW50cycpO1xyXG4gICAgICAgIHJlc3RhdXJhbnRzLmZvckVhY2goIFxyXG4gICAgICAgICAgcmVzdGF1cmFudCA9PiByZXN0YXVyYW50U3RvcmUucHV0KHJlc3RhdXJhbnQpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50cyk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3RhdXJhbnRTdG9yZS5jb21wbGV0ZTtcclxuICAgICAgfSk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhgUmVxdWVzdCBmYWlsZWQ6ICR7ZXJyb3J9YCk7XHJcbiAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAqIEZldGNoIGEgcmVzdGF1cmFudCBieSBpdHMgSUQuXHJcbiAqL1xyXG5zdGF0aWMgZmV0Y2hSZXN0YXVyYW50QnlJZChpZCwgY2FsbGJhY2spIHtcclxuICAvLyBmZXRjaCBhbGwgcmVzdGF1cmFudHMgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXHJcbiAgdGhpcy5mZXRjaFJlc3RhdXJhbnRzKCAoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgcmVzdGF1cmFudCA9IHJlc3RhdXJhbnRzLmZpbmQociA9PiByLmlkID09IGlkKTtcclxuICAgICAgaWYgKHJlc3RhdXJhbnQpIHsgLy8gR290IHRoZSByZXN0YXVyYW50XHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdGF1cmFudCk7XHJcbiAgICAgIH0gZWxzZSB7IC8vIFJlc3RhdXJhbnQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGRhdGFiYXNlXHJcbiAgICAgICAgY2FsbGJhY2soJ1Jlc3RhdXJhbnQgZG9lcyBub3QgZXhpc3QnLCBudWxsKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIHJlc3RhdXJhbnRzIGJ5IGEgY3Vpc2luZSB0eXBlIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmUoY3Vpc2luZSwgY2FsbGJhY2spIHtcclxuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50cyAgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmdcclxuICAgIHRoaXMuZmV0Y2hSZXN0YXVyYW50cygoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBGaWx0ZXIgcmVzdGF1cmFudHMgdG8gaGF2ZSBvbmx5IGdpdmVuIGN1aXNpbmUgdHlwZVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSByZXN0YXVyYW50cy5maWx0ZXIociA9PiByLmN1aXNpbmVfdHlwZSA9PSBjdWlzaW5lKTtcclxuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHRzKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCByZXN0YXVyYW50cyBieSBhIG5laWdoYm9yaG9vZCB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cclxuICAgKi9cclxuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50QnlOZWlnaGJvcmhvb2QobmVpZ2hib3Job29kLCBjYWxsYmFjaykge1xyXG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXHJcbiAgICB0aGlzLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gRmlsdGVyIHJlc3RhdXJhbnRzIHRvIGhhdmUgb25seSBnaXZlbiBuZWlnaGJvcmhvb2RcclxuICAgICAgICBjb25zdCByZXN1bHRzID0gcmVzdGF1cmFudHMuZmlsdGVyKHIgPT4gci5uZWlnaGJvcmhvb2QgPT0gbmVpZ2hib3Job29kKTtcclxuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHRzKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCByZXN0YXVyYW50cyBieSBhIGN1aXNpbmUgYW5kIGEgbmVpZ2hib3Job29kIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmVBbmROZWlnaGJvcmhvb2QoY3Vpc2luZSwgbmVpZ2hib3Job29kLCBjYWxsYmFjaykge1xyXG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXHJcbiAgICB0aGlzLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdHMgPSByZXN0YXVyYW50cztcclxuICAgICAgICBpZiAoY3Vpc2luZSAhPSAnYWxsJykgeyAvLyBmaWx0ZXIgYnkgY3Vpc2luZVxyXG4gICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKHIgPT4gci5jdWlzaW5lX3R5cGUgPT0gY3Vpc2luZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuZWlnaGJvcmhvb2QgIT0gJ2FsbCcpIHsgLy8gZmlsdGVyIGJ5IG5laWdoYm9yaG9vZFxyXG4gICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKHIgPT4gci5uZWlnaGJvcmhvb2QgPT0gbmVpZ2hib3Job29kKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggYWxsIG5laWdoYm9yaG9vZHMgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoTmVpZ2hib3Job29kcyhjYWxsYmFjaykge1xyXG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXHJcbiAgICB0aGlzLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gR2V0IGFsbCBuZWlnaGJvcmhvb2RzIGZyb20gYWxsIHJlc3RhdXJhbnRzXHJcbiAgICAgICAgY29uc3QgbmVpZ2hib3Job29kcyA9IHJlc3RhdXJhbnRzLm1hcCgodiwgaSkgPT4gcmVzdGF1cmFudHNbaV0ubmVpZ2hib3Job29kKTtcclxuICAgICAgICAvLyBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIG5laWdoYm9yaG9vZHNcclxuICAgICAgICBjb25zdCB1bmlxdWVOZWlnaGJvcmhvb2RzID0gbmVpZ2hib3Job29kcy5maWx0ZXIoKHYsIGkpID0+IG5laWdoYm9yaG9vZHMuaW5kZXhPZih2KSA9PSBpKTtcclxuICAgICAgICBjYWxsYmFjayhudWxsLCB1bmlxdWVOZWlnaGJvcmhvb2RzKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCBhbGwgY3Vpc2luZXMgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoQ3Vpc2luZXMoY2FsbGJhY2spIHtcclxuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50c1xyXG4gICAgdGhpcy5mZXRjaFJlc3RhdXJhbnRzKChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEdldCBhbGwgY3Vpc2luZXMgZnJvbSBhbGwgcmVzdGF1cmFudHNcclxuICAgICAgICBjb25zdCBjdWlzaW5lcyA9IHJlc3RhdXJhbnRzLm1hcCgodiwgaSkgPT4gcmVzdGF1cmFudHNbaV0uY3Vpc2luZV90eXBlKTtcclxuICAgICAgICAvLyBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGN1aXNpbmVzXHJcbiAgICAgICAgY29uc3QgdW5pcXVlQ3Vpc2luZXMgPSBjdWlzaW5lcy5maWx0ZXIoKHYsIGkpID0+IGN1aXNpbmVzLmluZGV4T2YodikgPT0gaSk7XHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgdW5pcXVlQ3Vpc2luZXMpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc3RhdXJhbnQgcGFnZSBVUkwuXHJcbiAgICovXHJcbiAgc3RhdGljIHVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCkge1xyXG4gICAgcmV0dXJuIChgLi9yZXN0YXVyYW50Lmh0bWw/aWQ9JHtyZXN0YXVyYW50LmlkfWApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzdGF1cmFudCBpbWFnZSBVUkwuXHJcbiAgICovXHJcbiAgc3RhdGljIGltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSB7XHJcbiAgICByZXR1cm4gKGAvaW1nLyR7cmVzdGF1cmFudC5pZH0uanBnYCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBNYXAgbWFya2VyIGZvciBhIHJlc3RhdXJhbnQuXHJcbiAgICovXHJcbiAgc3RhdGljIG1hcE1hcmtlckZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgbWFwKSB7XHJcbiAgICBjb25zdCBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcclxuICAgICAgcG9zaXRpb246IHJlc3RhdXJhbnQubGF0bG5nLFxyXG4gICAgICB0aXRsZTogcmVzdGF1cmFudC5uYW1lLFxyXG4gICAgICB1cmw6IHRoaXMudXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSxcclxuICAgICAgbWFwOiBtYXAsXHJcbiAgICAgIGFuaW1hdGlvbjogZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkRST1B9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIG1hcmtlcjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIHJldmlld3MgYnkgcmVzdGF1cmFudCBJRFxyXG4gICAqL1xyXG5cclxuICBzdGF0aWMgZmV0Y2hSZXZpZXdzQnlSZXN0YXVyYW50SWQoKSB7XHJcbiAgICBpZih0aGlzLnBpbmdTZXJ2ZXIodGhpcy5SRVZJRVdTX1VSTCkpIHtcclxuICAgICAgY29uc29sZS5sb2coXCJTZXJ2ZXIgb25saW5lLlwiKVxyXG4gICAgICB0aGlzLmZldGNoUmV2aWV3c0Zyb21TZXJ2ZXIoKTtcclxuICAgICAgY29uc29sZS5sb2coXCJGZXRjaGVkIGZyb20gc2VydmVyLlwiKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coXCJTZXJ2ZXIgb2ZmbGluZS5cIilcclxuICAgICAgdGhpcy5mZXRjaFJldmlld3NGcm9tREIoZmlsbFJldmlld3NIVE1MKTtcclxuICAgICAgY29uc29sZS5sb2coXCJGZXRjaGVkIGZyb20gY2FjaGVkIGRhdGEuXCIpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCByZXZpZXdzIGZyb20gc2VydmVyXHJcbiAgICovXHJcblxyXG4gICBzdGF0aWMgZmV0Y2hSZXZpZXdzRnJvbVNlcnZlcigpIHtcclxuICAgICAvLyBjaGVjayBuZXR3b3JrIGZvciByZXZpZXdzIGVuZHBvaW50XHJcbiAgICBmZXRjaChgJHtEQkhlbHBlci5SRVZJRVdTX1VSTH0vP3Jlc3RhdXJhbnRfaWQ9JHtOdW1iZXIoZ2V0UGFyYW1ldGVyQnlOYW1lKCdpZCcpKX1gKVxyXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHJldHVybiByZXNwb25zZS5qc29uKClcclxuICAgIH0pXHJcbiAgICAudGhlbihyZXZpZXdzID0+IHtcclxuICAgICAgLy8gcHV0IHRob3NlIHJldmlld3MgaW50byBJREJcclxuICAgICAgdGhpcy5vcGVuRGIudGhlbiggZGIgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJldmlld3NTdG9yZSA9IGRiLnRyYW5zYWN0aW9uKCdyZXZpZXdzJywgJ3JlYWR3cml0ZScpLm9iamVjdFN0b3JlKCdyZXZpZXdzJyk7XHJcbiAgICAgICAgcmV2aWV3cy5mb3JFYWNoKCBcclxuICAgICAgICAgIHJldmlldyA9PiByZXZpZXdzU3RvcmUucHV0KHJldmlldylcclxuICAgICAgICApO1xyXG4gICAgICAvLyBpZihyZXZpZXdzICYmIHJldmlld3MubGVuZ3RoID4gMCkgY2FsbGJhY2sobnVsbCwgcmV2aWV3cyk7XHJcbiAgICAgIHJldHVybiByZXZpZXdzU3RvcmUuY29tcGxldGU7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKGZpbGxSZXZpZXdzSFRNTChyZXZpZXdzKSlcclxuICAgIH0pXHJcbiAgIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggcmV2aWV3cyBmcm9tIHNlcnZlclxyXG4gICAqL1xyXG5cclxuICBzdGF0aWMgZmV0Y2hSZXZpZXdzRnJvbURCKHJldmlld3MpIHtcclxuICAgIHRoaXMub3BlbkRiLnRoZW4oZGIgPT4ge1xyXG4gICAgICAvLyBjb21iaW5lICdyZXZpZXdzJyAmJiAncmV2aWV3UXVldWUnIHN0b3Jlc1xyXG4gICAgICBjb25zdCByZXZpZXdTdG9yZSA9IGRiLnRyYW5zYWN0aW9uKCdyZXZpZXdzJywgJ3JlYWRvbmx5Jykub2JqZWN0U3RvcmUoJ3Jldmlld3MnKSxcclxuICAgICAgICAgICAgcXVldWVTdG9yZSA9IGRiLnRyYW5zYWN0aW9uKCdyZXZpZXdRdWV1ZScsICdyZWFkb25seScpLm9iamVjdFN0b3JlKCdyZXZpZXdRdWV1ZScpLFxyXG4gICAgICAgICAgICBhbGxSZXZpZXdzID0gUHJvbWlzZS5hbGwocmV2aWV3U3RvcmUuZ2V0QWxsKCkgKyBxdWV1ZVN0b3JlLmdldEFsbCgpKTtcclxuXHJcbiAgICAgIGlmKHJldmlld3MgJiYgcmV2aWV3cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgcmV2aWV3c1N0b3JlLmdldEFsbCgpXHJcbiAgICAgICAgLnRoZW4oIHJldmlldyA9PiB7XHJcbiAgICAgICAgICBmaWxsUmV2aWV3c0hUTUwocmV2aWV3KVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJldmlld1N0b3JlLmNvbXBsZXRlO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCB0byBxdWV1ZVxyXG4gICAqL1xyXG4gIHN0YXRpYyBhZGRSZXZpZXdUb1F1ZXVlKHJldmlld3MpIHtcclxuICAgIHRoaXMub3BlbkRiLnRoZW4oZGIgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJldmlld1N0b3JlID0gZGIudHJhbnNhY3Rpb24oJ3Jldmlld1F1ZXVlJywgJ3JlYWR3cml0ZScpLm9iamVjdFN0b3JlKCdyZXZpZXdRdWV1ZScpO1xyXG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmUgcmV2aWV3XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmV2aWV3cykpIHtcclxuICAgICAgICAgIHJldmlld3MuZm9yRWFjaChyZXZpZXcgPT4ge1xyXG4gICAgICAgICAgICByZXZpZXdTdG9yZS5wdXQocmV2aWV3KVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbW9yZSByZXZpZXdzIHN0b3JlZCcpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBpZiBvbmx5IG9uZS4uLlxyXG4gICAgICAgICAgcmV2aWV3U3RvcmUucHV0KHJldmlld3MpXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnb25lIHJldmlldyBzdG9yZWQnKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmV2aWV3U3RvcmUuY29tcGxldGU7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oZmlsbFJldmlld3NIVE1MKHJldmlld3MpKVxyXG4gICAgLnRoZW4oY29uc29sZS5sb2coJ1lvdVxcJ3JlIG9mZmxpbmUuIFJldmlld3MgcXVldWVkIScpKVxyXG4gIH1cclxuXHJcblxyXG4gIC8qXHJcbiAgKiBQb3N0IHBlbmRpbmcgcmV2aWV3cyB0byBuZXR3b3JrIChhZnRlciBvbmxpbmUpXHJcbiAgKi9cclxuICBzdGF0aWMgcG9zdEZyb21SZXZpZXdRdWV1ZSgpIHtcclxuICAgIHRoaXMub3BlbkRiLnRoZW4oZGIgPT4ge1xyXG4gICAgICBjb25zdCBxdWV1ZVN0b3JlID0gZGIudHJhbnNhY3Rpb24oJ3Jldmlld1F1ZXVlJywgJ3JlYWR3cml0ZScpLm9iamVjdFN0b3JlKCdyZXZpZXdRdWV1ZScpO1xyXG4gICAgICBxdWV1ZVN0b3JlLmdldEFsbCgpXHJcbiAgICAgIC50aGVuKG9mZmxpbmVSZXZpZXdzID0+IHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvZmZsaW5lUmV2aWV3cykpIHtcclxuICAgICAgICAgIG9mZmxpbmVSZXZpZXdzLmZvckVhY2gob2ZmbGluZVJldmlldyA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zdFRvU2VydmVyKG9mZmxpbmVSZXZpZXcpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5wb3N0VG9TZXJ2ZXIob2ZmbGluZVJldmlldyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihwdXNoZWRSZXZpZXdzID0+IHtcclxuICAgICAgICBxdWV1ZVN0b3JlLmNsZWFyKHB1c2hlZFJldmlld3MpO1xyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgKiBTdG9yZSBzZXJ2ZXIgZGF0YSBpbnRvIElEQlxyXG4gICovXHJcblxyXG4gIHN0YXRpYyBzdG9yZUluSURCKCkge1xyXG4gICAgLy8gbG9vayBhdCBzZXJ2ZXIgcmV2aWV3c1xyXG4gICAgZmV0Y2goYCR7dGhpcy5SRVZJRVdTX1VSTH0vP3Jlc3RhdXJhbnRfaWQ9JHtnZXRQYXJhbWV0ZXJCeU5hbWUoJ2lkJyl9YClcclxuICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgIC50aGVuKHJldmlld3MgPT4ge1xyXG4gICAgICB0aGlzLm9wZW5EYi50aGVuKCBkYiA9PiB7XHJcbiAgICAgICAgY29uc3QgcmV2aWV3U3RvcmUgPSBkYi50cmFuc2FjdGlvbigncmV2aWV3cycsICdyZWFkd3JpdGUnKS5vYmplY3RTdG9yZSgncmV2aWV3cycpO1xyXG4gICAgICAgIHJldmlld3MuZm9yRWFjaChcclxuICAgICAgICAgIHJldmlldyA9PiByZXZpZXdTdG9yZS5wdXQocmV2aWV3KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHJldmlld1N0b3JlLmNvbXBsZXRlO1xyXG4gICAgICB9KTtcclxuICAgIH0pXHJcbiAgICAudGhlbigoKSA9PiBjb25zb2xlLmxvZygnUmV2aWV3cyB1cGRhdGVkIGluIElEQiEnKSlcclxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICogUHV0IG9iamVjdCAoZGF0YSB2YWx1ZXMpIGZyb20gZm9ybSBvbnRvIHNlcnZlci5cclxuICAqL1xyXG5cclxuICBzdGF0aWMgcG9zdFRvU2VydmVyKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLlJFVklFV1NfVVJMLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICAgIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nLFxyXG4gICAgICAvLyBtb2RlOiAnbm8tY29ycydcclxuICAgIH0pXHJcbiAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgIGlmKHJlc3BvbnNlLm9rKSByZXR1cm4gcmVzcG9uc2UuanNvbigpXHJcbiAgICB9KSAvLyBwYXJzZSByZXNwb25zZSB0byBKU09OXHJcbiAgICAudGhlbih0aGlzLnN0b3JlSW5JREIoZGF0YSkpIC8vIGNvcHkgdG8gSURCIHJldmlld3Mgc3RvcmVcclxuICAgIC50aGVuKGxvY2F0aW9uLnJlbG9hZCh0cnVlKSkgLy8gcmVmcmVzaCBwYWdlXHJcbiAgICAuY2F0Y2goZXJyID0+IGVycik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgdG9nZ2xlIHN0YXRlIG9uIHNlcnZlclxyXG4gICAqL1xyXG5cclxuICBzdGF0aWMgY2hhbmdlVG9nZ2xlU3RhdGVPblNlcnZlcih0b2dnbGUpIHtcclxuICAgIGZldGNoKGAke3RoaXMuUkVTVEFVUkFOVFNfVVJMfS8ke2dldFBhcmFtZXRlckJ5TmFtZSgnaWQnKX0vP2lzX2Zhdm9yaXRlPSR7dG9nZ2xlfWAsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0b2dnbGUpLFxyXG4gICAgICBjcmVkZW50aWFsczogJ3NhbWUtb3JpZ2luJyxcclxuICAgICAgbW9kZTogJ25vLWNvcnMnXHJcbiAgICB9KVxyXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICBpZihyZXNwb25zZS5vaykgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVxyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnIgPT4gZXJyKTtcclxuICB9XHJcblxyXG59IiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG4gIFxuICBmdW5jdGlvbiB0b0FycmF5KGFycikge1xuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnIpO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCk7XG4gICAgICB9O1xuXG4gICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb21pc2lmeVJlcXVlc3RDYWxsKG9iaiwgbWV0aG9kLCBhcmdzKSB7XG4gICAgbGV0IHJlcXVlc3QsXG4gICAgICAgIHAgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICByZXF1ZXN0ID0gb2JqW21ldGhvZF0uYXBwbHkob2JqLCBhcmdzKTtcbiAgICAgICAgICBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG5cbiAgICBwLnJlcXVlc3QgPSByZXF1ZXN0O1xuICAgIHJldHVybiBwO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJvbWlzaWZ5Q3Vyc29yUmVxdWVzdENhbGwob2JqLCBtZXRob2QsIGFyZ3MpIHtcbiAgICBsZXQgcCA9IHByb21pc2lmeVJlcXVlc3RDYWxsKG9iaiwgbWV0aG9kLCBhcmdzKTtcbiAgICByZXR1cm4gcC50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAoIXZhbHVlKSByZXR1cm47XG4gICAgICByZXR1cm4gbmV3IEN1cnNvcih2YWx1ZSwgcC5yZXF1ZXN0KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb3h5UHJvcGVydGllcyhQcm94eUNsYXNzLCB0YXJnZXRQcm9wLCBwcm9wZXJ0aWVzKSB7XG4gICAgcHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcm94eUNsYXNzLnByb3RvdHlwZSwgcHJvcCwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB0aGlzW3RhcmdldFByb3BdW3Byb3BdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgIHRoaXNbdGFyZ2V0UHJvcF1bcHJvcF0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJveHlSZXF1ZXN0TWV0aG9kcyhQcm94eUNsYXNzLCB0YXJnZXRQcm9wLCBDb25zdHJ1Y3RvciwgcHJvcGVydGllcykge1xuICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG4gICAgICBpZiAoIShwcm9wIGluIENvbnN0cnVjdG9yLnByb3RvdHlwZSkpIHJldHVybjtcbiAgICAgIFByb3h5Q2xhc3MucHJvdG90eXBlW3Byb3BdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0Q2FsbCh0aGlzW3RhcmdldFByb3BdLCBwcm9wLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb3h5TWV0aG9kcyhQcm94eUNsYXNzLCB0YXJnZXRQcm9wLCBDb25zdHJ1Y3RvciwgcHJvcGVydGllcykge1xuICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG4gICAgICBpZiAoIShwcm9wIGluIENvbnN0cnVjdG9yLnByb3RvdHlwZSkpIHJldHVybjtcbiAgICAgIFByb3h5Q2xhc3MucHJvdG90eXBlW3Byb3BdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzW3RhcmdldFByb3BdW3Byb3BdLmFwcGx5KHRoaXNbdGFyZ2V0UHJvcF0sIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJveHlDdXJzb3JSZXF1ZXN0TWV0aG9kcyhQcm94eUNsYXNzLCB0YXJnZXRQcm9wLCBDb25zdHJ1Y3RvciwgcHJvcGVydGllcykge1xuICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG4gICAgICBpZiAoIShwcm9wIGluIENvbnN0cnVjdG9yLnByb3RvdHlwZSkpIHJldHVybjtcbiAgICAgIFByb3h5Q2xhc3MucHJvdG90eXBlW3Byb3BdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNpZnlDdXJzb3JSZXF1ZXN0Q2FsbCh0aGlzW3RhcmdldFByb3BdLCBwcm9wLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIEluZGV4KGluZGV4KSB7XG4gICAgdGhpcy5faW5kZXggPSBpbmRleDtcbiAgfVxuXG4gIHByb3h5UHJvcGVydGllcyhJbmRleCwgJ19pbmRleCcsIFtcbiAgICAnbmFtZScsXG4gICAgJ2tleVBhdGgnLFxuICAgICdtdWx0aUVudHJ5JyxcbiAgICAndW5pcXVlJ1xuICBdKTtcblxuICBwcm94eVJlcXVlc3RNZXRob2RzKEluZGV4LCAnX2luZGV4JywgSURCSW5kZXgsIFtcbiAgICAnZ2V0JyxcbiAgICAnZ2V0S2V5JyxcbiAgICAnZ2V0QWxsJyxcbiAgICAnZ2V0QWxsS2V5cycsXG4gICAgJ2NvdW50J1xuICBdKTtcblxuICBwcm94eUN1cnNvclJlcXVlc3RNZXRob2RzKEluZGV4LCAnX2luZGV4JywgSURCSW5kZXgsIFtcbiAgICAnb3BlbkN1cnNvcicsXG4gICAgJ29wZW5LZXlDdXJzb3InXG4gIF0pO1xuXG4gIGZ1bmN0aW9uIEN1cnNvcihjdXJzb3IsIHJlcXVlc3QpIHtcbiAgICB0aGlzLl9jdXJzb3IgPSBjdXJzb3I7XG4gICAgdGhpcy5fcmVxdWVzdCA9IHJlcXVlc3Q7XG4gIH1cblxuICBwcm94eVByb3BlcnRpZXMoQ3Vyc29yLCAnX2N1cnNvcicsIFtcbiAgICAnZGlyZWN0aW9uJyxcbiAgICAna2V5JyxcbiAgICAncHJpbWFyeUtleScsXG4gICAgJ3ZhbHVlJ1xuICBdKTtcblxuICBwcm94eVJlcXVlc3RNZXRob2RzKEN1cnNvciwgJ19jdXJzb3InLCBJREJDdXJzb3IsIFtcbiAgICAndXBkYXRlJyxcbiAgICAnZGVsZXRlJ1xuICBdKTtcblxuICAvLyBwcm94eSAnbmV4dCcgbWV0aG9kc1xuICBbJ2FkdmFuY2UnLCAnY29udGludWUnLCAnY29udGludWVQcmltYXJ5S2V5J10uZm9yRWFjaChmdW5jdGlvbihtZXRob2ROYW1lKSB7XG4gICAgaWYgKCEobWV0aG9kTmFtZSBpbiBJREJDdXJzb3IucHJvdG90eXBlKSkgcmV0dXJuO1xuICAgIEN1cnNvci5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgIGxldCBjdXJzb3IgPSB0aGlzLFxuICAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgY3Vyc29yLl9jdXJzb3JbbWV0aG9kTmFtZV0uYXBwbHkoY3Vyc29yLl9jdXJzb3IsIGFyZ3MpO1xuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdChjdXJzb3IuX3JlcXVlc3QpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBpZiAoIXZhbHVlKSByZXR1cm47XG4gICAgICAgICAgcmV0dXJuIG5ldyBDdXJzb3IodmFsdWUsIGN1cnNvci5fcmVxdWVzdCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gT2JqZWN0U3RvcmUoc3RvcmUpIHtcbiAgICB0aGlzLl9zdG9yZSA9IHN0b3JlO1xuICB9XG5cbiAgT2JqZWN0U3RvcmUucHJvdG90eXBlLmNyZWF0ZUluZGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBJbmRleCh0aGlzLl9zdG9yZS5jcmVhdGVJbmRleC5hcHBseSh0aGlzLl9zdG9yZSwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgT2JqZWN0U3RvcmUucHJvdG90eXBlLmluZGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBJbmRleCh0aGlzLl9zdG9yZS5pbmRleC5hcHBseSh0aGlzLl9zdG9yZSwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgcHJveHlQcm9wZXJ0aWVzKE9iamVjdFN0b3JlLCAnX3N0b3JlJywgW1xuICAgICduYW1lJyxcbiAgICAna2V5UGF0aCcsXG4gICAgJ2luZGV4TmFtZXMnLFxuICAgICdhdXRvSW5jcmVtZW50J1xuICBdKTtcblxuICBwcm94eVJlcXVlc3RNZXRob2RzKE9iamVjdFN0b3JlLCAnX3N0b3JlJywgSURCT2JqZWN0U3RvcmUsIFtcbiAgICAncHV0JyxcbiAgICAnYWRkJyxcbiAgICAnZGVsZXRlJyxcbiAgICAnY2xlYXInLFxuICAgICdnZXQnLFxuICAgICdnZXRBbGwnLFxuICAgICdnZXRLZXknLFxuICAgICdnZXRBbGxLZXlzJyxcbiAgICAnY291bnQnXG4gIF0pO1xuXG4gIHByb3h5Q3Vyc29yUmVxdWVzdE1ldGhvZHMoT2JqZWN0U3RvcmUsICdfc3RvcmUnLCBJREJPYmplY3RTdG9yZSwgW1xuICAgICdvcGVuQ3Vyc29yJyxcbiAgICAnb3BlbktleUN1cnNvcidcbiAgXSk7XG5cbiAgcHJveHlNZXRob2RzKE9iamVjdFN0b3JlLCAnX3N0b3JlJywgSURCT2JqZWN0U3RvcmUsIFtcbiAgICAnZGVsZXRlSW5kZXgnXG4gIF0pO1xuXG4gIGZ1bmN0aW9uIFRyYW5zYWN0aW9uKGlkYlRyYW5zYWN0aW9uKSB7XG4gICAgdGhpcy5fdHggPSBpZGJUcmFuc2FjdGlvbjtcbiAgICB0aGlzLmNvbXBsZXRlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBpZGJUcmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH07XG4gICAgICBpZGJUcmFuc2FjdGlvbi5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChpZGJUcmFuc2FjdGlvbi5lcnJvcik7XG4gICAgICB9O1xuICAgICAgaWRiVHJhbnNhY3Rpb24ub25hYm9ydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QoaWRiVHJhbnNhY3Rpb24uZXJyb3IpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5vYmplY3RTdG9yZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgT2JqZWN0U3RvcmUodGhpcy5fdHgub2JqZWN0U3RvcmUuYXBwbHkodGhpcy5fdHgsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIHByb3h5UHJvcGVydGllcyhUcmFuc2FjdGlvbiwgJ190eCcsIFtcbiAgICAnb2JqZWN0U3RvcmVOYW1lcycsXG4gICAgJ21vZGUnXG4gIF0pO1xuXG4gIHByb3h5TWV0aG9kcyhUcmFuc2FjdGlvbiwgJ190eCcsIElEQlRyYW5zYWN0aW9uLCBbXG4gICAgJ2Fib3J0J1xuICBdKTtcblxuICBmdW5jdGlvbiBVcGdyYWRlREIoZGIsIG9sZFZlcnNpb24sIHRyYW5zYWN0aW9uKSB7XG4gICAgdGhpcy5fZGIgPSBkYjtcbiAgICB0aGlzLm9sZFZlcnNpb24gPSBvbGRWZXJzaW9uO1xuICAgIHRoaXMudHJhbnNhY3Rpb24gPSBuZXcgVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICB9XG5cbiAgVXBncmFkZURCLnByb3RvdHlwZS5jcmVhdGVPYmplY3RTdG9yZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgT2JqZWN0U3RvcmUodGhpcy5fZGIuY3JlYXRlT2JqZWN0U3RvcmUuYXBwbHkodGhpcy5fZGIsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIHByb3h5UHJvcGVydGllcyhVcGdyYWRlREIsICdfZGInLCBbXG4gICAgJ25hbWUnLFxuICAgICd2ZXJzaW9uJyxcbiAgICAnb2JqZWN0U3RvcmVOYW1lcydcbiAgXSk7XG5cbiAgcHJveHlNZXRob2RzKFVwZ3JhZGVEQiwgJ19kYicsIElEQkRhdGFiYXNlLCBbXG4gICAgJ2RlbGV0ZU9iamVjdFN0b3JlJyxcbiAgICAnY2xvc2UnXG4gIF0pO1xuXG4gIGZ1bmN0aW9uIERCKGRiKSB7XG4gICAgdGhpcy5fZGIgPSBkYjtcbiAgfVxuXG4gIERCLnByb3RvdHlwZS50cmFuc2FjdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgVHJhbnNhY3Rpb24odGhpcy5fZGIudHJhbnNhY3Rpb24uYXBwbHkodGhpcy5fZGIsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIHByb3h5UHJvcGVydGllcyhEQiwgJ19kYicsIFtcbiAgICAnbmFtZScsXG4gICAgJ3ZlcnNpb24nLFxuICAgICdvYmplY3RTdG9yZU5hbWVzJ1xuICBdKTtcblxuICBwcm94eU1ldGhvZHMoREIsICdfZGInLCBJREJEYXRhYmFzZSwgW1xuICAgICdjbG9zZSdcbiAgXSk7XG5cbiAgLy8gQWRkIGN1cnNvciBpdGVyYXRvcnNcbiAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgb25jZSBicm93c2VycyBkbyB0aGUgcmlnaHQgdGhpbmcgd2l0aCBwcm9taXNlc1xuICBbJ29wZW5DdXJzb3InLCAnb3BlbktleUN1cnNvciddLmZvckVhY2goZnVuY3Rpb24oZnVuY05hbWUpIHtcbiAgICBbT2JqZWN0U3RvcmUsIEluZGV4XS5mb3JFYWNoKGZ1bmN0aW9uKENvbnN0cnVjdG9yKSB7XG4gICAgICAvLyBEb24ndCBjcmVhdGUgaXRlcmF0ZUtleUN1cnNvciBpZiBvcGVuS2V5Q3Vyc29yIGRvZXNuJ3QgZXhpc3QuXG4gICAgICBpZiAoIShmdW5jTmFtZSBpbiBDb25zdHJ1Y3Rvci5wcm90b3R5cGUpKSByZXR1cm47XG5cbiAgICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZVtmdW5jTmFtZS5yZXBsYWNlKCdvcGVuJywgJ2l0ZXJhdGUnKV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgbGV0IGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyksXG4gICAgICAgICAgICBjYWxsYmFjayA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXSxuYXRpdmVPYmplY3QgPSB0aGlzLl9zdG9yZSB8fCB0aGlzLl9pbmRleCxyZXF1ZXN0ID0gbmF0aXZlT2JqZWN0W2Z1bmNOYW1lXS5hcHBseShuYXRpdmVPYmplY3QsIGFyZ3Muc2xpY2UoMCwgLTEpKTtcbiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBjYWxsYmFjayhyZXF1ZXN0LnJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBwb2x5ZmlsbCBnZXRBbGxcbiAgW0luZGV4LCBPYmplY3RTdG9yZV0uZm9yRWFjaChmdW5jdGlvbihDb25zdHJ1Y3Rvcikge1xuICAgIGlmIChDb25zdHJ1Y3Rvci5wcm90b3R5cGUuZ2V0QWxsKSByZXR1cm47XG4gICAgQ29uc3RydWN0b3IucHJvdG90eXBlLmdldEFsbCA9IGZ1bmN0aW9uKHF1ZXJ5LCBjb3VudCkge1xuICAgICAgbGV0IGluc3RhbmNlID0gdGhpcyxcbiAgICAgICAgICBpdGVtcyA9IFtdO1xuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgICAgICBpbnN0YW5jZS5pdGVyYXRlQ3Vyc29yKHF1ZXJ5LCBmdW5jdGlvbihjdXJzb3IpIHtcbiAgICAgICAgICBpZiAoIWN1cnNvcikge1xuICAgICAgICAgICAgcmVzb2x2ZShpdGVtcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1zLnB1c2goY3Vyc29yLnZhbHVlKTtcblxuICAgICAgICAgIGlmIChjb3VudCAhPT0gdW5kZWZpbmVkICYmIGl0ZW1zLmxlbmd0aCA9PSBjb3VudCkge1xuICAgICAgICAgICAgcmVzb2x2ZShpdGVtcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG4gIGxldCBleHAgPSB7XG4gICAgb3BlbjogZnVuY3Rpb24obmFtZSwgdmVyc2lvbiwgdXBncmFkZUNhbGxiYWNrKSB7XG4gICAgICBsZXQgcCA9IHByb21pc2lmeVJlcXVlc3RDYWxsKGluZGV4ZWREQiwgJ29wZW4nLCBbbmFtZSwgdmVyc2lvbl0pLFxuICAgICAgICAgIHJlcXVlc3QgPSBwLnJlcXVlc3Q7XG5cbiAgICAgIGlmIChyZXF1ZXN0KSB7XG4gICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICBpZiAodXBncmFkZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICB1cGdyYWRlQ2FsbGJhY2sobmV3IFVwZ3JhZGVEQihyZXF1ZXN0LnJlc3VsdCwgZXZlbnQub2xkVmVyc2lvbiwgcmVxdWVzdC50cmFuc2FjdGlvbikpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHAudGhlbihmdW5jdGlvbihkYikge1xuICAgICAgICByZXR1cm4gbmV3IERCKGRiKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVsZXRlOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdENhbGwoaW5kZXhlZERCLCAnZGVsZXRlRGF0YWJhc2UnLCBbbmFtZV0pO1xuICAgIH1cbiAgfTtcblxuICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cDtcbiAgICBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0ID0gbW9kdWxlLmV4cG9ydHM7XG4gIH1cbiAgZWxzZSB7XG4gICAgc2VsZi5pZGIgPSBleHA7XG4gIH1cbn0oKSk7IiwibGV0IHJlc3RhdXJhbnRzLFxyXG4gICAgbmVpZ2hib3Job29kcyxcclxuICAgIGN1aXNpbmVzLFxyXG4gICAgbWFwLFxyXG4gICAgbWFya2VycyA9IFtdO1xyXG5cclxuLyoqXHJcbiAqIEZldGNoIG5laWdoYm9yaG9vZHMgYW5kIGN1aXNpbmVzIGFzIHNvb24gYXMgdGhlIHBhZ2UgaXMgbG9hZGVkLlxyXG4gKi9cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIChldmVudCkgPT4ge1xyXG4gIGZldGNoTmVpZ2hib3Job29kcygpO1xyXG4gIGZldGNoQ3Vpc2luZXMoKTtcclxuICBEQkhlbHBlci5waW5nU2VydmVyKERCSGVscGVyLlJFVklFV1NfVVJMKSA/IERCSGVscGVyLnBvc3RGcm9tUmV2aWV3UXVldWUoKSA6IGNvbnNvbGUubG9nKCdPZmZsaW5lJylcclxufSk7XHJcblxyXG4vKipcclxuICogRmV0Y2ggYWxsIG5laWdoYm9yaG9vZHMgYW5kIHNldCB0aGVpciBIVE1MLlxyXG4gKi9cclxuZmV0Y2hOZWlnaGJvcmhvb2RzID0gKCkgPT4ge1xyXG4gIERCSGVscGVyLmZldGNoTmVpZ2hib3Job29kcygoZXJyb3IsIG5laWdoYm9yaG9vZHMpID0+IHtcclxuICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3JcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzZWxmLm5laWdoYm9yaG9vZHMgPSBuZWlnaGJvcmhvb2RzO1xyXG4gICAgICBmaWxsTmVpZ2hib3Job29kc0hUTUwoKTtcclxuICAgIH1cclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTZXQgbmVpZ2hib3Job29kcyBIVE1MLlxyXG4gKi9cclxuZmlsbE5laWdoYm9yaG9vZHNIVE1MID0gKG5laWdoYm9yaG9vZHMgPSBzZWxmLm5laWdoYm9yaG9vZHMpID0+IHtcclxuICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVpZ2hib3Job29kcy1zZWxlY3QnKTtcclxuICBuZWlnaGJvcmhvb2RzLmZvckVhY2gobmVpZ2hib3Job29kID0+IHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgb3B0aW9uLmlubmVySFRNTCA9IG5laWdoYm9yaG9vZDtcclxuICAgIG9wdGlvbi52YWx1ZSA9IG5laWdoYm9yaG9vZDtcclxuICAgIHNlbGVjdC5hcHBlbmQob3B0aW9uKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBhbGwgY3Vpc2luZXMgYW5kIHNldCB0aGVpciBIVE1MLlxyXG4gKi9cclxuZmV0Y2hDdWlzaW5lcyA9ICgpID0+IHtcclxuICBEQkhlbHBlci5mZXRjaEN1aXNpbmVzKChlcnJvciwgY3Vpc2luZXMpID0+IHtcclxuICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3IhXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2VsZi5jdWlzaW5lcyA9IGN1aXNpbmVzO1xyXG4gICAgICBmaWxsQ3Vpc2luZXNIVE1MKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogU2V0IGN1aXNpbmVzIEhUTUwuXHJcbiAqL1xyXG5maWxsQ3Vpc2luZXNIVE1MID0gKGN1aXNpbmVzID0gc2VsZi5jdWlzaW5lcykgPT4ge1xyXG4gIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdWlzaW5lcy1zZWxlY3QnKTtcclxuXHJcbiAgY3Vpc2luZXMuZm9yRWFjaChjdWlzaW5lID0+IHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgb3B0aW9uLmlubmVySFRNTCA9IGN1aXNpbmU7XHJcbiAgICBvcHRpb24udmFsdWUgPSBjdWlzaW5lO1xyXG4gICAgc2VsZWN0LmFwcGVuZChvcHRpb24pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgR29vZ2xlIG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cclxuICovXHJcbndpbmRvdy5pbml0TWFwID0gKCkgPT4ge1xyXG4gIGxldCBsb2MgPSB7XHJcbiAgICBsYXQ6IDQwLjcyMjIxNixcclxuICAgIGxuZzogLTczLjk4NzUwMVxyXG4gIH07XHJcbiAgc2VsZi5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xyXG4gICAgem9vbTogMTIsXHJcbiAgICBjZW50ZXI6IGxvYyxcclxuICAgIHNjcm9sbHdoZWVsOiBmYWxzZVxyXG4gIH0pO1xyXG4gIHVwZGF0ZVJlc3RhdXJhbnRzKCk7XHJcbn07XHJcblxyXG4vKipcclxuICogVXBkYXRlIHBhZ2UgYW5kIG1hcCBmb3IgY3VycmVudCByZXN0YXVyYW50cy5cclxuICovXHJcbnVwZGF0ZVJlc3RhdXJhbnRzID0gKCkgPT4ge1xyXG4gIGNvbnN0IGNTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Vpc2luZXMtc2VsZWN0Jyk7XHJcbiAgY29uc3QgblNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2RzLXNlbGVjdCcpO1xyXG5cclxuICBjb25zdCBjSW5kZXggPSBjU2VsZWN0LnNlbGVjdGVkSW5kZXg7XHJcbiAgY29uc3QgbkluZGV4ID0gblNlbGVjdC5zZWxlY3RlZEluZGV4O1xyXG5cclxuICBjb25zdCBjdWlzaW5lID0gY1NlbGVjdFtjSW5kZXhdLnZhbHVlO1xyXG4gIGNvbnN0IG5laWdoYm9yaG9vZCA9IG5TZWxlY3RbbkluZGV4XS52YWx1ZTtcclxuXHJcbiAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kKGN1aXNpbmUsIG5laWdoYm9yaG9vZCwgKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXNldFJlc3RhdXJhbnRzKHJlc3RhdXJhbnRzKTtcclxuICAgICAgZmlsbFJlc3RhdXJhbnRzSFRNTCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENsZWFyIGN1cnJlbnQgcmVzdGF1cmFudHMsIHRoZWlyIEhUTUwgYW5kIHJlbW92ZSB0aGVpciBtYXAgbWFya2Vycy5cclxuICovXHJcbnJlc2V0UmVzdGF1cmFudHMgPSAocmVzdGF1cmFudHMpID0+IHtcclxuICAvLyBSZW1vdmUgYWxsIHJlc3RhdXJhbnRzXHJcbiAgc2VsZi5yZXN0YXVyYW50cyA9IFtdO1xyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnRzLWxpc3QnKTtcclxuICB1bC5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgLy8gUmVtb3ZlIGFsbCBtYXAgbWFya2Vyc1xyXG4gIGlmIChzZWxmLm1hcmtlcnMpIHtcclxuICAgIHNlbGYubWFya2Vycy5mb3JFYWNoKG1hcmtlciA9PiBtYXJrZXIgPSBudWxsKTtcclxuICB9XHJcbiAgc2VsZi5tYXJrZXJzID0gW107XHJcbiAgc2VsZi5yZXN0YXVyYW50cyA9IHJlc3RhdXJhbnRzO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGFsbCByZXN0YXVyYW50cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUgd2VicGFnZS5cclxuICovXHJcbmZpbGxSZXN0YXVyYW50c0hUTUwgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpO1xyXG4gIHJlc3RhdXJhbnRzLmZvckVhY2gocmVzdGF1cmFudCA9PiB7XHJcbiAgICB1bC5hcHBlbmQoY3JlYXRlUmVzdGF1cmFudEhUTUwocmVzdGF1cmFudCkpO1xyXG4gIH0pO1xyXG4gIGFkZE1hcmtlcnNUb01hcCgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwuXHJcbiAqL1xyXG5jcmVhdGVSZXN0YXVyYW50SFRNTCA9IChyZXN0YXVyYW50KSA9PiB7XHJcbiAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG5cclxuICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gIGltYWdlLmNsYXNzTmFtZSA9ICdyZXN0YXVyYW50LWltZyc7XHJcbiAgaW1hZ2Uuc3JjID0gREJIZWxwZXIuaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xyXG4gIGltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgcmVzdGF1cmFudC5uYW1lKTtcclxuICBsaS5hcHBlbmQoaW1hZ2UpO1xyXG5cclxuICBjb25zdCBuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcclxuICBuYW1lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcclxuICBsaS5hcHBlbmQobmFtZSk7XHJcblxyXG4gIGNvbnN0IG5laWdoYm9yaG9vZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICBuZWlnaGJvcmhvb2QuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uZWlnaGJvcmhvb2Q7XHJcbiAgbGkuYXBwZW5kKG5laWdoYm9yaG9vZCk7XHJcblxyXG4gIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3M7XHJcbiAgbGkuYXBwZW5kKGFkZHJlc3MpO1xyXG5cclxuICBjb25zdCBtb3JlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gIG1vcmUuaW5uZXJIVE1MID0gJ1ZpZXcgRGV0YWlscyAmcmFxdW87JztcclxuICBtb3JlLmhyZWYgPSBEQkhlbHBlci51cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xyXG4gIGxpLmFwcGVuZChtb3JlKTtcclxuXHJcbiAgcmV0dXJuIGxpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEFkZCBtYXJrZXJzIGZvciBjdXJyZW50IHJlc3RhdXJhbnRzIHRvIHRoZSBtYXAuXHJcbiAqL1xyXG5hZGRNYXJrZXJzVG9NYXAgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgcmVzdGF1cmFudHMuZm9yRWFjaChyZXN0YXVyYW50ID0+IHtcclxuICAgIC8vIEFkZCBtYXJrZXIgdG8gdGhlIG1hcFxyXG4gICAgY29uc3QgbWFya2VyID0gREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBzZWxmLm1hcCk7XHJcbiAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsICdjbGljaycsICgpID0+IHtcclxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBtYXJrZXIudXJsO1xyXG4gICAgfSk7XHJcbiAgICBzZWxmLm1hcmtlcnMucHVzaChtYXJrZXIpO1xyXG4gIH0pO1xyXG59O1xyXG4iLCJpZignc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XG4gIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyXG4gICAgICAgICAgIC5yZWdpc3RlcignL3N3LmpzJywgeyBzY29wZTogXCIvXCIgfSlcbiAgICAgICAgICAgLnRoZW4ocmVnID0+IHtcbiAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bDogJyArIHJlZy5zY29wZSk7XG4gICAgICAgICAgIH0pXG4gICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvcjogJyArIGVycik7XG4gICAgICAgICAgIH0pO1xufSIsImxldCByZXN0YXVyYW50LFxuICAgIG1hcDtcblxuY29uc3QgcmV2aWV3Rm9ybSA9IGRvY3VtZW50LmZvcm1zWzBdLFxuICAgICAgaGVhcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3ZnLWhlYXJ0Jyk7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gIERCSGVscGVyLnBpbmdTZXJ2ZXIoREJIZWxwZXIuUkVWSUVXU19VUkwpID8gREJIZWxwZXIucG9zdEZyb21SZXZpZXdRdWV1ZSgpIDogY29uc29sZS5sb2coJ09mZmxpbmUnKVxufSwgZmFsc2UpO1xuXG4vKipcbiAqIEluaXRpYWxpemUgR29vZ2xlIG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cbiAqL1xud2luZG93LmluaXRNYXAgPSAoKSA9PiB7XG4gIGZldGNoUmVzdGF1cmFudEZyb21VUkwoKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XG4gICAgICAgIHpvb206IDE2LFxuICAgICAgICBjZW50ZXI6IHJlc3RhdXJhbnQubGF0bG5nLFxuICAgICAgICBzY3JvbGx3aGVlbDogZmFsc2VcbiAgICAgIH0pO1xuICAgICAgZmlsbEJyZWFkY3J1bWIoc2VsZi5yZXN0YXVyYW50KTtcbiAgICAgIERCSGVscGVyLm1hcE1hcmtlckZvclJlc3RhdXJhbnQoc2VsZi5yZXN0YXVyYW50LCBzZWxmLm1hcCk7XG4gICAgfVxuICB9KTtcbn07XG5cbi8qKlxuICogR2V0IGN1cnJlbnQgcmVzdGF1cmFudCBmcm9tIHBhZ2UgVVJMLlxuICovXG5mZXRjaFJlc3RhdXJhbnRGcm9tVVJMID0gKGNhbGxiYWNrKSA9PiB7XG4gIGlmIChzZWxmLnJlc3RhdXJhbnQpIHsgLy8gcmVzdGF1cmFudCBhbHJlYWR5IGZldGNoZWQhXG4gICAgY2FsbGJhY2sobnVsbCwgc2VsZi5yZXN0YXVyYW50KTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgaWQgPSBnZXRQYXJhbWV0ZXJCeU5hbWUoJ2lkJyk7XG4gIGlmICghaWQpIHsgLy8gbm8gaWQgZm91bmQgaW4gVVJMXG4gICAgZXJyb3IgPSAnTm8gcmVzdGF1cmFudCBpZCBpbiBVUkwnO1xuICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgfSBlbHNlIHtcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRCeUlkKGlkLCAoZXJyb3IsIHJlc3RhdXJhbnQpID0+IHtcbiAgICAgIHNlbGYucmVzdGF1cmFudCA9IHJlc3RhdXJhbnQ7XG4gICAgICBpZiAoIXJlc3RhdXJhbnQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZpbGxSZXN0YXVyYW50SFRNTCgpO1xuICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdGF1cmFudCk7XG4gICAgfSk7XG4gICAgREJIZWxwZXIuZmV0Y2hSZXZpZXdzQnlSZXN0YXVyYW50SWQoaWQsIChlcnJvciwgcmV2aWV3cykgPT4ge1xuICAgICAgaWYoIXJldmlld3MpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKFwiRmV0Y2hlZCByZXZpZXdzOiBcIiwgcmV2aWV3cy5sZW5ndGgpXG4gICAgICBmaWxsUmV2aWV3c0hUTUwocmV2aWV3cyk7XG4gICAgICBjYWxsYmFjayhudWxsLCByZXZpZXdzKTtcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZVxuICovXG5maWxsUmVzdGF1cmFudEhUTUwgPSAocmVzdGF1cmFudCA9IHNlbGYucmVzdGF1cmFudCkgPT4ge1xuICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtbmFtZScpO1xuICBuYW1lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcblxuICBjb25zdCBhZGRyZXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtYWRkcmVzcycpO1xuICBhZGRyZXNzLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuYWRkcmVzcztcblxuICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWltZycpO1xuICBpbWFnZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcnO1xuICBpbWFnZS5zcmMgPSBEQkhlbHBlci5pbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCk7XG4gIGltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgcmVzdGF1cmFudC5uYW1lKTtcblxuICBjb25zdCBjdWlzaW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtY3Vpc2luZScpO1xuICBjdWlzaW5lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuY3Vpc2luZV90eXBlO1xuXG4gIC8vIGZpbGwgb3BlcmF0aW5nIGhvdXJzXG4gIGlmIChyZXN0YXVyYW50Lm9wZXJhdGluZ19ob3Vycykge1xuICAgIGZpbGxSZXN0YXVyYW50SG91cnNIVE1MKCk7XG4gIH1cbn07XG5cbi8qKlxuICogQ3JlYXRlIHJlc3RhdXJhbnQgb3BlcmF0aW5nIGhvdXJzIEhUTUwgdGFibGUgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cbiAqL1xuZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwgPSAob3BlcmF0aW5nSG91cnMgPSBzZWxmLnJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzKSA9PiB7XG4gIGNvbnN0IGhvdXJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtaG91cnMnKTtcbiAgZm9yIChsZXQga2V5IGluIG9wZXJhdGluZ0hvdXJzKSB7XG4gICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcblxuICAgIGNvbnN0IGRheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgZGF5LmlubmVySFRNTCA9IGtleTtcbiAgICByb3cuYXBwZW5kQ2hpbGQoZGF5KTtcblxuICAgIGNvbnN0IHRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgIHRpbWUuaW5uZXJIVE1MID0gb3BlcmF0aW5nSG91cnNba2V5XTtcbiAgICByb3cuYXBwZW5kQ2hpbGQodGltZSk7XG5cbiAgICBob3Vycy5hcHBlbmRDaGlsZChyb3cpO1xuICB9XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhbGwgcmV2aWV3cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUgd2VicGFnZS5cbiAqL1xuZmlsbFJldmlld3NIVE1MID0gKHJldmlld3MgPSBzZWxmLnJlc3RhdXJhbnQucmV2aWV3cykgPT4ge1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1jb250YWluZXInKSxcbiAgICAgICAgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICB0aXRsZS5pbm5lckhUTUwgPSAnUmV2aWV3cyc7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cbiAgaWYgKCFyZXZpZXdzKSB7XG4gICAgY29uc3Qgbm9SZXZpZXdzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIG5vUmV2aWV3cy5pbm5lckhUTUwgPSAnTm8gcmV2aWV3cyB5ZXQuIEJlIHRoZSBmaXJzdCEnO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChub1Jldmlld3MpO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXdzLWxpc3QnKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkocmV2aWV3cykpIHtcbiAgICByZXZpZXdzLmZvckVhY2gocmV2aWV3ID0+IHtcbiAgICAgIHVsLmFwcGVuZENoaWxkKGNyZWF0ZVJldmlld0hUTUwocmV2aWV3KSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdWwuYXBwZW5kQ2hpbGQoY3JlYXRlUmV2aWV3SFRNTChyZXZpZXdzKSk7XG4gIH1cbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHVsKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIHJldmlldyBIVE1MIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmNyZWF0ZVJldmlld0hUTUwgPSAocmV2aWV3KSA9PiB7XG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKSxcbiAgICAgICAgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgbmFtZS5pbm5lckhUTUwgPSByZXZpZXcubmFtZTtcbiAgbGkuYXBwZW5kQ2hpbGQobmFtZSk7XG5cbiAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSxcbiAgICAgICAgY3JlYXRlZCA9IG5ldyBEYXRlKHJldmlldy5jcmVhdGVkQXQpLFxuICAgICAgICBkYXRlT3B0aW9ucyA9IHtcbiAgICAgICAgICB5ZWFyOiAnbnVtZXJpYycsIFxuICAgICAgICAgIG1vbnRoOiAnbG9uZycsIFxuICAgICAgICAgIGRheTogJ251bWVyaWMnLFxuICAgICAgICAgIGhvdXIxMjogZmFsc2VcbiAgICAgICAgfTtcbiAgZGF0ZS5pbm5lckhUTUwgPSBjcmVhdGVkLnRvTG9jYWxlU3RyaW5nKCdlbi1VUycsIGRhdGVPcHRpb25zKTtcbiAgbGkuYXBwZW5kQ2hpbGQoZGF0ZSk7XG5cbiAgY29uc3QgcmF0aW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICByYXRpbmcuaW5uZXJIVE1MID0gYFJhdGluZzogJHtyZXZpZXcucmF0aW5nfSBzdGFyc2A7XG4gIGxpLmFwcGVuZENoaWxkKHJhdGluZyk7XG5cbiAgY29uc3QgY29tbWVudHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIGNvbW1lbnRzLmlubmVySFRNTCA9IHJldmlldy5jb21tZW50cztcbiAgbGkuYXBwZW5kQ2hpbGQoY29tbWVudHMpO1xuXG4gIHJldHVybiBsaTtcbn07XG5cbi8qKlxuICogQWRkIHJlc3RhdXJhbnQgbmFtZSB0byB0aGUgYnJlYWRjcnVtYiBuYXZpZ2F0aW9uIG1lbnVcbiAqL1xuZmlsbEJyZWFkY3J1bWIgPSAocmVzdGF1cmFudCA9IHNlbGYucmVzdGF1cmFudCkgPT4ge1xuICBjb25zdCBicmVhZGNydW1iID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JyZWFkY3J1bWInKSxcbiAgICAgICAgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICBsaS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY3VycmVudCcsICdwYWdlJyk7XG4gIGxpLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcbiAgYnJlYWRjcnVtYi5hcHBlbmRDaGlsZChsaSk7XG59O1xuXG4vKipcbiAqIEdldCBhIHBhcmFtZXRlciBieSBuYW1lIGZyb20gcGFnZSBVUkwuXG4gKi9cbmdldFBhcmFtZXRlckJ5TmFtZSA9IChuYW1lLCB1cmwpID0+IHtcbiAgaWYgKCF1cmwpXG4gICAgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXFtcXF1dL2csICdcXFxcJCYnKTtcbiAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGBbPyZdJHtuYW1lfSg9KFteJiNdKil8JnwjfCQpYCksXG4gICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTtcbiAgaWYgKCFyZXN1bHRzKVxuICAgIHJldHVybiBudWxsO1xuICBpZiAoIXJlc3VsdHNbMl0pXG4gICAgcmV0dXJuICcnO1xuICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMl0ucmVwbGFjZSgvXFwrL2csICcgJykpO1xufTtcblxuXG4vKipcbiAqIEdyYWIgaW5wdXQgZGF0YSwgcG9zdCB0byBJREIsIHRoZW4gcG9zdCB0byBzZXJ2ZXJcbioqL1xuXG5mdW5jdGlvbiBhZGRSZXZpZXcoZXZlbnQpIHtcbiAgLy8gUHJldmVudCBkZWZhdWx0IHN1Ym1pc3Npb24gYmVoYXZpb3JcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAvLyBHcmFiIHRoZSB2YWx1ZXMgZnJvbSB0aGUgZm9ybSBmaWVsZHNcbiAgY29uc3QgdXNlck5hbWUgPSByZXZpZXdGb3JtWyduYW1lJ10udmFsdWUsXG4gICAgICAgIHVzZXJSYXRpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmV2aWV3LXJhZGlvcyBpbnB1dFt0eXBlPXJhZGlvXTpjaGVja2VkJykudmFsdWUsXG4gICAgICAgIHVzZXJDb21tZW50ID0gcmV2aWV3Rm9ybS5jb21tZW50cy52YWx1ZTtcblxuICAgLy8gQ29uc3RydWN0IHRoZW0gaW50byBhIGByZXZpZXdgIG9iamVjdFxuXG4gIGNvbnN0IHJldmlld0RhdGEgPSB7XG4gICAgcmVzdGF1cmFudF9pZDogTnVtYmVyKGdldFBhcmFtZXRlckJ5TmFtZSgnaWQnKSksXG4gICAgbmFtZTogdXNlck5hbWUsXG4gICAgcmF0aW5nOiBOdW1iZXIodXNlclJhdGluZyksXG4gICAgY29tbWVudHM6IHVzZXJDb21tZW50LFxuICAgIGNyZWF0ZWRBdDogTnVtYmVyKG5ldyBEYXRlKCkpLFxuICAgIHVwZGF0ZWRBdDogTnVtYmVyKG5ldyBEYXRlKCkpXG4gIH1cblxuICAvLyBQT1NUIHRoZSByZXZpZXcgdG8gSURCIHJldmlld1F1ZXVlIHN0b3JlXG4gIERCSGVscGVyLmFkZFJldmlld1RvUXVldWUocmV2aWV3RGF0YSk7XG5cbiAgLy8gUmVzZXQgZm9ybVxuICByZXZpZXdGb3JtLnJlc2V0KCk7XG5cbn1cblxuLypcbiAqIExpc3RlbiBmb3Igc3VibWlzc2lvbiBvZiByZXZpZXcgZm9ybVxuICovXG5cbnJldmlld0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgYWRkUmV2aWV3LCBmYWxzZSk7XG5cblxuLyogXG4gKiBGYXZvcml0ZSBUb2dnbGVcbiAqL1xuXG5mdW5jdGlvbiB0b2dnbGVGYXZvcml0ZSgpIHtcbiAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhcnQtdG9nZ2xlJyk7XG4gIGNoZWNrYm94LmNoZWNrZWQgPyBcbiAgICBoZWFydC5zdHlsZS5maWxsID0gJ3JlZCcgOiBoZWFydC5zdHlsZS5maWxsID0gJyNlZWUnO1xuICBjaGVja2JveC5jaGVja2VkID8gXG4gICAgREJIZWxwZXIuY2hhbmdlVG9nZ2xlU3RhdGVPblNlcnZlcih0cnVlKSA6IFxuICAgIERCSGVscGVyLmNoYW5nZVRvZ2dsZVN0YXRlT25TZXJ2ZXIoZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBjaGVja0ZhdmUoKSB7XG4gIGZldGNoKGAke0RCSGVscGVyLlJFU1RBVVJBTlRTX1VSTH1gKVxuICAudGhlbigoKSA9PiB7XG4gICAgc2VsZi5yZXN0YXVyYW50LmlzX2Zhdm9yaXRlID09IFwidHJ1ZVwiID9cbiAgICAgIGhlYXJ0LnN0eWxlLmZpbGwgPSAncmVkJyA6IGhlYXJ0LnN0eWxlLmZpbGwgPSAnI2VlZSc7XG4gIH0pXG59XG5cbmhlYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlRmF2b3JpdGUpO1xuXG5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgY2hlY2tGYXZlLCBmYWxzZSk7Il19
